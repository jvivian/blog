---
title: "The Cereal Convention"
subtitle: "A Kingdom Death Campaign Log"
format: 
  html:
    # css: styles.css
    toc: true
    toc-depth: 2
    # code-fold: true
    echo: false
editor: visual
execute: 
    render-on-save: true
# image: "imgs/cereal-cover.png"
tools:
  - mermaid
---

# Settlement Overview
> There is no sanity clause [^1]

[^1]: Sandman Volume 3: The Doll's House

::: {.column-page}
::: {.column width="40%"}
### Campaign Information
- **Settlement Name**: The Cereal Convention  
- **Campaign**: People of the Lantern  
- **Boss**: Watcher  
- **Finale**: Gold Smoke Knight  
:::

::: {.column width="50%"}
![The Cereal Convention](imgs/cereal-cover.png)
:::
:::

### Principles
| New Life       | Death         | Society         |
|----------------|---------------|-----------------|
| Protect the Young | Cannibalize  | Accept the Darkness |


## Nodes

:::: {.columns}
::: {.column width="30%"}
### Quarry

```{mermaid}
graph TB
    A(Crimson Crocodile)
    B(Smog Singers)
    C(Sunstalker)
    D(King)

    A --> B
    B --> C
    C --> D
```
:::

::: {.column width="30%"}
### Nemesis
```{mermaid}
graph TB
    A(Manhunter)
    B(Atnas)
    C(Black Knight)

    A --> B
    B --> C
```
:::
::: {.column width="30%"}
### Boss & Finale
```{mermaid}
graph TB
    A(Watcher)
    B(Gold Smoke Knight)

    A --> B
```
:::
:::: 

::: {.column-screen-inset}
```{python}
import matplotlib.pyplot as plt
import pandas as pd
import numpy as np
import plotly.express as px
import seaborn as sns
import warnings
warnings.filterwarnings('ignore')


# Data
df = pd.read_csv('./data.csv')
df['Type'] = pd.Categorical(df['Type'], ['Quarry', 'Nemesis'])
df['Deaths'] = df['Deaths'].astype(int)
df['Level'] = df['Level'].astype(int)

# Style
df.style.hide(axis='index')
pd.set_option('display.max_colwidth', None)

# Constants
COLS = ['Monster', 'Level', 'Deaths', 'Story Event', 'Settlement Event', 'Notable Event']
# df['Monster'] = pd.Categorical(df['Monster'], categories=['Crimson Crocodile', 'Smog Singers', 'Sunstalker', 'King', 'Manhunter', 'Atnas', 'Black Knight', 'Watcher', 'Gold Smoke Knight'], ordered=True)
# df['Monster'] = pd.Categorical(df['Monster'], categories=['Crimson Crocodile', 'Smog Singers', 'Manhunter', 'Atnas'], ordered=True)
# df
```
## Monster Timeline
```{python}
#| fig-align: center
plt.figure(figsize=(16, 4))
sns.scatterplot(df, x='Year', y='Monster', style='Type', size='Level', hue='Monster', palette='Set2', s=50)
ax = sns.lineplot(df[df.Type == 'Quarry'], x='Year', y='Monster', c='k');
ax.lines[0].set_linestyle('--');
sns.lineplot(df[df.Type == 'Nemesis'], x='Year', y='Monster', c='cornflowerblue');
```

## Population Timeline

```{python}
#| fig-align: center
plt.figure(figsize=(16, 4))
sns.lineplot(df, x='Year', y='Population', c='red');
```

:::

# Campaign Log

## Prologue: Devour the White Lion
:::{.column-screen}
![](imgs/CrimsonCroc.png)
:::

:::{.column-page-inset}
```{python}
df[df.Year == 0][COLS].fillna(' ').style.hide(axis='index')
```
:::

**Starting Characters**: Charlie, Carrie, Patrick Bateman, Freddie

## Year 1: First Crimson Day

:::{.column-page-inset}
```{python}
df[df.Year == 1][COLS].fillna(' ').style.hide(axis='index')
```
:::

## Year 2: Smog Song
:::{.column-page-inset}
```{python}
df[df.Year == 2][COLS].fillna(' ').style.hide(axis='index')
```
:::
## Year 3: Velvet Fog
:::{.column-screen}
![](imgs/SmogSingers.png)
:::
:::{.column-page-inset}
```{python}
df[df.Year == 3][COLS].fillna(' ').style.hide(axis='index')
```
:::

## Year 4: The Hooded Knight
:::{.column-page-inset}
```{python}
df[df.Year == 4][COLS].fillna(' ').style.hide(axis='index')
```
:::

## Year 5: Plague / The Hanged Man
:::{.column-page-inset}
```{python}
df[df.Year == 5][COLS].fillna(' ').style.hide(axis='index')
```
:::

## Year 6: Unwanted Gifts / Knighting
:::{.column-page-inset}
```{python}
df[df.Year == 6][COLS].fillna(' ').style.hide(axis='index')
```
:::

## Year 7: Self-invited Guests


