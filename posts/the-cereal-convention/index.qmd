---
title: "The Cereal Convention"
subtitle: "A Kingdom Death Campaign Log"
format: 
  html:
    # css: styles.css
    toc: true
    toc-depth: 2
    # code-fold: true
    echo: false
editor: visual
execute: 
    render-on-save: true
# image: "imgs/cereal-cover.png"
tools:
  - mermaid
---

# Settlement Overview
> There is no sanity clause [^1]

[^1]: Sandman Volume 3: The Doll's House

::: {.column-page}
::: {.column width="40%"}
### Campaign Information
- **Settlement Name**: The Cereal Convention  
- **Campaign**: People of the Lantern  
- **Boss**: Watcher  
- **Finale**: Gold Smoke Knight  
:::

::: {.column width="50%"}
![](imgs/cereal-cover.png)
:::
:::

### Principles
| New Life       | Death         | Society         |
|----------------|---------------|-----------------|
| Protect the Young | Cannibalize  | Accept the Darkness |


## Nodes

:::: {.columns}
::: {.column width="30%"}
### Quarry

```{mermaid}
graph TB
    A(Crimson Crocodile)
    B(Smog Singers)
    C(Sunstalker)
    D(King)

    A --> B
    B --> C
    C --> D
```
:::

::: {.column width="30%"}
### Nemesis
```{mermaid}
graph TB
    A(Manhunter)
    B(Atnas)
    C(Black Knight)

    A --> B
    B --> C
```
:::
::: {.column width="30%"}
### Boss & Finale
```{mermaid}
graph TB
    A(Watcher)
    B(Gold Smoke Knight)

    A --> B
```
:::
:::: 

::: {.column-screen-inset}
```{python}
import matplotlib.pyplot as plt
import pandas as pd
import numpy as np
import plotly.express as px
import seaborn as sns
import warnings
warnings.filterwarnings('ignore')


# Data
df = pd.read_csv('./data.csv')
df['Type'] = pd.Categorical(df['Type'], ['Quarry', 'Nemesis'])
df['Deaths'] = df['Deaths'].astype(int)
df['Level'] = df['Level'].astype(int)

# Style
df.style.hide(axis='index')
pd.set_option('display.max_colwidth', None)

# Constants
COLS = ['Monster', 'Level', 'Deaths', 'Innovation', 'Story Event', 'Settlement Event', 'Notable Event']
PROLOGUE = [x for x in COLS if x!= 'Story Event']
ND = [x for x in COLS if x != 'Deaths']
# df['Monster'] = pd.Categorical(df['Monster'], categories=['Crimson Crocodile', 'Smog Singers', 'Sunstalker', 'King', 'Manhunter', 'Atnas', 'Black Knight', 'Watcher', 'Gold Smoke Knight'], ordered=True)
# df['Monster'] = pd.Categorical(df['Monster'], categories=['Crimson Crocodile', 'Smog Singers', 'Manhunter', 'Atnas'], ordered=True)
# df

def year(year, cols=COLS):
    return df[df.Year == year][cols].fillna(' ').style.hide(axis='index')
```
## Monster Timeline
```{python}
#| fig-align: center
plt.figure(figsize=(16, 4))
sns.scatterplot(df, x='Year', y='Monster', style='Type', size='Level', hue='Monster', palette='Set2', s=50)
ax = sns.lineplot(df[df.Type == 'Quarry'], x='Year', y='Monster', c='k');
ax.lines[0].set_linestyle('--');
sns.lineplot(df[df.Type == 'Nemesis'], x='Year', y='Monster', c='cornflowerblue');
```

## Population Timeline

```{python}
#| fig-align: center
plt.figure(figsize=(16, 4))
sns.lineplot(df, x='Year', y='Population', c='red');
```

:::

# Campaign Log

## Prologue: Devour the White Lion
::::{.column-screen}
![](imgs/CrimsonCroc.png)
:::

:::: {.column-page}

:::{.column width=70%}
```{python}
year(0, PROLOGUE)
```
:::

:::{.column width=20%}
**Starting Characters** 

- Carrie
- Patrick Bateman
- Freddie Krueger
- Charlie (_Hereditary_) 
:::
::::



## Year 1: First Crimson Day
::: {.column-page-inset}
```{python}
year(1, ND)
```
:::
::: {.column-page}
![](imgs/year1.png)
:::

## Year 2: Death of Song
:::{.column-page-inset}
```{python}
year(2, ND)
```
:::{.column-screen}
![](imgs/SmogSingers.png)
:::

:::
## Year 3: Velvet Fog
:::{.column-page-inset}
```{python}
year(3)
```
:::
:::{.column-body}
![](imgs/year3.png)
:::

## Year 4: Hooded Knight
:::{.column-page-inset}
```{python}
year(4)
```
:::

## Year 5: The Hanged Plaguebearer
:::{.column-page-inset}
```{python}
year(5)
```
:::

## Year 6: Unwanted Gifts
:::{.column-page-inset}
```{python}
year(6, ND)
```
:::

## Year 7: Self-invited Guests
:::{.column-page-inset}
```{python}
year(7)
```
:::


