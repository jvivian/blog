---
title: "Brazilian Jiu Jitsu concepts as graphs"
subtitle: ""
author: "John Vivian"
date: "2023-08-30"
categories: [BJJ, Graphs]
image: "cover-jv.jpg"
format:
    html:
        toc: true
---

> Depth-first S~~earch~~cooch

---

::: {#fig-video}
<iframe width="560" height="315" src="https://www.youtube.com/embed/0geE0E0muKE?si=TO2fYaQdTt70l445" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>

Video Demo - Defining a BJJ concept as a graph and then combining it with other concepts
:::

Everybody loves [graphs](https://en.wikipedia.org/wiki/Graph_(discrete_mathematics)) -- if you are not "everybody", see sidebar ➡️ -- and they seem an ideal data structure for representing concepts in Brazilian Jiu Jitsu (BJJ). I think of BJJ as a loose physical analogue to chess which has several [graph-based explorers](https://www.chessroots.com/). While Chess explorers use directed acyclic graphs, BJJ is more intuitively modeled as a cyclic graph due to state repetition. For example, one could represent _nodes_ and _edges_ as positions and transitions/moves respectively.

::: {.column-margin}
![Node two ways about it](pawdna.png){fig-alt="Don't like graphs? Keep walkin..."}
:::

Can this representation aid our study of BJJ?

I explored a few approaches: Drawing them on a tablet, `Draw.io` flowcharts, using [Obsidian](https://obsidian.md/) notes with links as directed edges, `Excalidraw`, and others..., but failed to meet some desired criteria: 

- Graphs have a portable definition - e.g. plaintext, not hand-drawn or proprietary format
- Easy to generate larger graphs from existing graphs
- Integrates into existing note-taking tool of choice (Obsidian)

## Concepts as Graphs
> It's All<br>Connected<br>
&nbsp;&nbsp;&nbsp;&nbsp;_Humanity's Last Breath - Passage_

We can represent an arbitrary concept -- such as _Maintaining Full Mount_ or _Triangle from De La Riva_ -- as a [Mermaid](https://mermaid.js.org/) diagram inside of [Obsidian](https://obsidian.md/). These discrete concepts can then act as new nodes within Obsidian's built-in `Canvas` note to produce larger meta-graphs representing game plans, focus areas, etc... 

::: {#fig-armbar}
```{mermaid}
flowchart LR

SMount((S-Mount)) -->|grab arm| ArmBar[Arm Bar]
```
A basic example with two node types, position (circle) and attack (square) connected by a movement (edge)
:::

In plaintext, this is written as

::: {#fig-armbar-graph}
```
flowchart LR

SMount((S-Mount)) -->|grab arm| ArmBar[Arm Bar]
```

Mermaid DSL definition of the armbar diagram
:::

::: {.callout-caution}
## Trouble seeing figures?
Try "Dark Mode": Toggle in the top right of the navbar 
::: 

## Graph Definitions: The Spaghetti Monster Cometh
> I have found the truth and it is made of Pasta<br>
&nbsp;&nbsp;&nbsp;&nbsp;_COTFSM_

As mentioned, an intuitive representation is a cyclic graph with _nodes_ as positions and _edges_ as moves/submissions/sweeps. Unfortunately, this more formal definition tends to produce an obfuscated graph. Below is an example of _Maintaining Full Mount_ with two edge types: dotted edges represent opponent movements and solid edges represent responses.

![Formal definition with _nodes_ as static positions and _edges_ as movements.](formal.png)

This definition is somewhat tedious to generate given the myriad of side-variations that stem from a given canonical position. Collapsing variations results in information loss but requiring each node define a specific position tends to produce an unaesthetic mess.

## Subgraphs and The Library of B~~abel~~erimbolos
> The library will endure; it is the universe<br>
&nbsp;&nbsp;&nbsp;&nbsp;_The Library of Babel_

Mermaid provides several dfferent node/edge/arrow types which can be used along with an alternative definiton to make the graph more concise. One approach is to use _subgraphs_, which allow us to nest subsections of the graph, resulting in a denser output with fewer edges. 

In this example, opponent moves are now represented as edges and our reaction are denoted by a separate node shape (rounded square). These reactions are nested within a respective subgraph that denotes the terminal position of the sequence.

![Use subgraphs for a denser representation](subgraph.png)

The other benefit of this approach is this graph now represents a potential modular component! A typical graph will likely have a left-most starting position and one or more possible terminal positions, such as our previous example with _High Mount_ and _Maintain Mount_. But how are these separate graphs combined across Obsidian notes?

Obsidian's `Canvas` allows any note to be inserted into a larger space which can then connect to other concepts into larger meta-graphs: representing anything from game plans to study areas. As more concepts are defined a "library" of ideas is built -- each cleanly contained in their own note note, which when edited is conveniently propogated to any canvas referencing that note. 

Below is a toy example where the previously defined subgraph previously defined is connected to some other possible concepts (which the author has lazily left undefined).

![Building a meta-graph in Obsidian's Canvas](canvas.png)

In addition to information retention -- the goal of most note-taking -- this approach should improve relating concepts learned at noncontiguous periods and assist in assembling systems that capitialize on curated experience. 

# Appendix
> For now, what is important is not finding the answer, but looking for it <br>
&nbsp;&nbsp;&nbsp;&nbsp;_Gödel, Escher, Bach: An Eternal Golden Braid_

## Afterward
I didn't plan on starting Jiu Jitsu when I moved last year in 2022. I had been interested since grad school when a guy on the UCSC Genome Browser team invited me to a trial class, but I was _waaay_ too broke at the time to even consider it. Serendipitiously, I saw a gym on a run exploring the area one day and decided to take a trial class with my wife. I was humbled by how much more difficult it was than it looked (and it didn't look easy to begin with).

I struggle with a lot in BJJ: I'm stubborn and hold bad grips, I have poor breath control, my ribs tend to pop out of place, and I'm over 30 which is borderline ancient for a combat sport.

And yet... I really enjoy it. It is challenging and forces me to prioritize my health and diet in order to even be able to train effectively. But most of my enjoyment stems from the generosity and kindness of the people who I'm fortunate enough to train with. Thanks to them this experience is a source of happiness in my life, and for that I am grateful.

## Acknowledgments
- Special thanks to Head Instructor Professor Jeremy Espiritu 
- Thank you to Coach Carlos Contreras and the Noon Goons
- Thank you to my wonderful wife who puts up with my pained groans and dubious choice of hobbies. She's amazing and not just because she's a doctor who is also very patient and understanding and so won't be upset that I might need my ear drained when she comes home later... (wish me luck)

![The author with some fellow Noon Goons](goons.jpg)


## Subgraph code
```
flowchart LR

subgraph M[Maintain Mount]
	direction LR
	Underhook(Wet noodle slurp)
	Waist(Grab the Plum and hip down hard) 
	WidePush(Swim like Phelps)
	ClosePush(Derisive arm shove)
end

subgraph HM[High Mount]
	direction LR
	Overhook[Head opposite side & spiderwalk] 
	SBBL[Shmoov on up, hand-edge in throat, halloween cat] 
	Knees[Yank arm & slide knee up 1-by-1]
end

FM((Full Mount)) ==> |Overhook| Overhook
FM --> |Underhook| Underhook
FM ==> |Seat Belt / Body Lock| SBBL
FM ==> |Knees| Knees
FM --> |Waist| Waist
FM --> |Wide Pushup| WidePush
FM --> |Close Pushup| ClosePush
```
