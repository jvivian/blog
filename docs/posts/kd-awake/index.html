<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="John Vivian">
<meta name="dcterms.date" content="2023-05-02">

<title>blog - Awake</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://jvivian.github.io" rel="" target=""><i class="bi bi-bookmarks" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jvivian" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://scholar.google.com/citations?user=CXQJI-AAAAAJ&amp;hl=en&amp;authuser=1" rel="" target=""><i class="bi bi-book" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/john-vivian-913b41a6/" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#infty-awake" id="toc-infty-awake" class="nav-link active" data-scroll-target="#infty-awake"><span class="math inline">\(\infty\)</span> : Awake</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Awake</h1>
<p class="subtitle lead">A Kingdom Death Tale</p>
  <div class="quarto-categories">
    <div class="quarto-category">Writing</div>
    <div class="quarto-category">Digital Art</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>John Vivian </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 2, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Viewing Recommendations
</div>
</div>
<div class="callout-body-container callout-body">
<center>
<b>A screen larger than a phone</b>
</center>
<center>
<b>Dark Mode: top-right of navbar</b>
</center>
</div>
</div>
<section id="infty-awake" class="level1 page-columns page-full">
<h1><span class="math inline">\(\infty\)</span> : Awake</h1>
<blockquote class="blockquote">
<p>Cogito, ergo sum</p>
</blockquote>
<center>
Darkness
</center>
<p><br></p>
<center>
Cold
</center>
<hr>
<center>
Pain
</center>
<p><br></p>
<center>
Light
</center>
<hr>
<center>
You
</center>
<p><br></p>
<center>
Awake
</center>
<p><br> <br></p>
<p>…and prop yourself up on the hard, damp surface beneath you. Something… something <em>feels</em> wrong. Hands move instinctively – cautiously probing for the intrusion at the behest of one subroutine that, task complete, falls back among billions of writhing kin that labor within the emergent cathedral formed from an uncountable array of taut chromatic threads. They murmur indecipherably, weaving a Rorschach loom deep into the static hum of an endless sprawling labyrinth below. Hands clench in concert – knuckles forming in flight – and begin the labor of rubbing away the thick, pitch-like sap that blinds you from the world. The darkness shudders and a horizon ruptures forth – spilling uncalibrated brilliance onto a virgin charcoal canvas – as the first photons smash uncaringly into their hibernating lover’s perfect grasping hands, hewn by millennia to receive them. Black jaws squeal momentarily then snap shut to ward off the spreading incandescent rot. Hands return once more, their work unfinished. As the knuckles knead and grind, countless phosphenes spawn, dance vibrantly, and die. A horizontal crack tentatively forms anew, flutters briefly in resistance, and then <em>opens</em>…</p>
<p>…to a sea of dark marble stone faces that extend out in all directions from the ashen and cracked ground below. Each face etched within the marble earth is unique, and your eyes lap greedily at the novel stimuli before the well quickly runs dry against a dark fading haze extending in all directions. Lethargic pulses and chaotic flickers of light sing out to one another from their perches within several dozen tarnished and heavy-looking lanterns that lie scattered haphazardly around you. Flames courageously slash and gouge impotent scars against the gloom’s surface before being quickly subsumed within its boundless polyphagic maw. The distant horizon bleeds pitifully into the twilight above. Glancing upward you subconsciously seek a constant engrained within the germ of your genetic lineage. You feel a deep pit of unease and confusion – <em>It is not there</em>. You lean forward – eyes strain their fibrous bridles, but find no purchase for the seam that separates one part of the formless space before you from another. Vertigo briefly sets in as your mind slowly begins to sink into the infinite sprawling vacuum. Discordance evokes a primal Stygian dread as sensory perception comes to conflict with <em>that which is known</em>.</p>
<p>The umbral space before you begins to st r <em>e &nbsp; &nbsp;t &nbsp; &nbsp; &nbsp; c &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&nbsp; h</em> <br></p>
<div class="column-screen">
<p><img src="ch00a-wide.jpg" class="img-fluid"></p>
</div>
<p>The low roar of an ocean fills your ears as the dull hammering beat of your heart grows louder, deafening you, stifling the chorus of pleas from reactive counter-measures as signal decays into a rising static tide. Glossolalia drips mercury-hot across your skin as the indiscernible cicadic chatter of a million voices rave the clarion call of the insane. Of <em>Machin Shin</em>, The Black Wind. The beckoning void reaches out to you, enveloping you, all-encompassing, all-consumi-<br><br><br></p>
<center>
Motion
</center>
<p><br></p>
<p>Response <br>     Potential<br>         Engagement<br>               Magnocellular Exultation<br><br></p>
<center>
<em>A rapidly expanding undifferentiated web of light</em>
</center>
<p><br></p>
<p>Perturbations in the periphery of your visual field scream out along ancient intention lines below to an older paranoid sibling who awakens with a slumbering roar, deafening the babble of the memetic death-spiral feedback loop within the cerebrum. The voices spiral out in chaotic gyres, growing dimmer as they lose coherence and scatter harmlessly upon the bone-dry wind.</p>
<p>Your head snaps quickly to focus on this disturbance and you see others – like yourself – spread out in the murk, sitting up, looking around, rubbing dark ink from their eyes. A few huddle together, one helping another to his feet. Your meandering eyes halt abruptly – pools of dark ink sloshing quietly against another – as you stare directly into the eyes of one sitting away from the others and closer to you. His gaze narrows briefly but quickly relaxes upon seeing your open expression. A moment passes. Small pockets depress the contours of his cheeks and the corners of his mouth turn upwards into a hesitant smile. Reflexively, your eyes move downwards in response, and, in transit, a saccadic mask deceives you and they arrive at their destination empty-handed. The lack of concordance between expectation and reality takes a fraction of a second to materialize.</p>
<p>A thin dark liquid spurts in a double exposure across the fading face you had glimpsed. Time slows in unison with the fluid’s passage, which pauses briefly at the peak of its lazy parabolic arc, and turns with a sigh to await the fall. An abyssal seed soars unimpeded into this plane on eldritch wind, takes root, germinates, and begins to bloom deep within. Your chest heaves against its newfound prison, your breath becoming ragged and uneven. Hyperventilation sets in as consciousness attempts to parse the frantic, abstract imagery of the subconscious.</p>
<p>The headless torso slumps forward, slamming violently down – pinned crudely into the chiseled ground by an enormous <em>human-like</em> hand. Viscera oozes between the White Lion’s dexterous fingers – a simulacrum of rotten human fruit. He has come to feast. Muscles rippling, eyes glinting with dangerous intelligence, it pivots smoothly towards another, who had only just begun rubbing the ink from his eyes, deftly cradling one hand around its prey’s face, another enclosing still-rubbing arms, and with unnecessary glee, sharply jerks the head off. The White Lion stands on hind legs and bellows – delighting in the ecstasy afforded apex predators – and begins the slaughter.</p>
<p><img src="lion.jpg" class="img-fluid"></p>
<p>Your unconscious backpedaling meets temporary resistance as you stumble into three others – the same ones you had seen together earlier – who embrace you in their trembling bosom of arms and rags to cower behind a meager shield of inadequate cover among a few torso-sized boulders. A hollow serenity fills you as the gore and carnage of the beast become a mere visual and auditory display, safely compartmentalized from the screaming and panicked signaling of other neural systems.</p>
<p>You look at the others, who paint a shifting scene of anguish, panic, and despair. You turn instinctively towards the others and lock eyes – you have no language with which to comfort one another. But what comfort is there in certain death? One who had been rocking back and forth on the ground with their arms around their knees slowly rises to their feet clutching something with white-knuckled hands. She opens them stiffly to reveal a bloodied shard of stone, taken from one of the fractured stone faces beneath them where the lion had first announced his presence.</p>
<p>Hope in the face of hopelessness.</p>
<p>You lock eyes with the others and your steeled gazes cut the Gordian knot. The scope and profundity of the absurd reality before you clarifies. What choice is there but to fight? To cower before death’s gaze is to diminish the spirit – far better to look it in the eye and shout defiantly. For there is hope where there is courage. You and the other two quickly take to the ground, scrounging for similar tools with which to arm yourselves. As you stand you suddenly realize the shocking stillness of the quiet around you.</p>
<p>No others remain but you and your meager cohort. And the White Lion, of course. He sits patiently several stones’ throws away, as if waiting for you to wake from your reverie and acknowledge the reality of the situation before its termination. A cruel sadism that seems unnecessary for fitness – but perhaps prolonging execution constitutes a form of bootstrapping when training the networks responsible for hunting, stalking, and killing prey.</p>
<p>The lion stands, pauses for a moment to sniff the air cautiously, then charges.</p>
<p>Epinephrine and norepinephrine flood your body, causing muscles to tense, mouth to dry, eyes to dilate, and your mind to clear. The lion seems to slow as each breath becomes loud in your ears. As the lion prepares to pounce he is startled by your looks of calm resolve and stutters in an attempt to abort. A demented cackle cuts through the air – you are unsure whether you or your peers are the origin.</p>
<p>You and the others lift the shards above your head and scream as you sprint with abandon towards the confused beast. Enthralled with such bestial triumph there is no room for petty thoughts of mortality. There is only room for glory. Only room for victory.</p>
<p>The world is a series of flashes, screams, roars, pain, and rage as you and the three others mercilessly stab the White Lion as it backpedals, slashing impotently, unable to adequately defend itself on all sides.</p>
<p>A woman, who holds no name as there is yet no language, seizes an opportunity as the lion limps weakly, blood leaking from myriad gashes and cuts in its flanks, and places the mortal blow. As the lion rears up on hind legs to bat away another attacker, the muscles in her arm ripple and time slows, the stone shard spinning end-over-end, until it collides with the lion’s groin – obliterating its genitals completely.</p>
<hr>
<p>As the dust settles and quiet returns, you and the others shatter the stillness with elated bellows and sapien ululations, embracing one another, jumping and whooping with unrestrained joy. Together you proceed to harvest several juicy spherical bits from the lion, use your sharpened stones to crudely hack away his once prideful mane, and set off together in search of shelter. For if the White Lion could survive here – at least for a time – so could they.</p>
<p>After an indeterminate period, you see a faint glow in the distance that continues to grow in the dark fog as your group moves closer. Emboldened – and without much choice – you proceed towards it and gasp along with the others when a towering stack of lanterns whose thin climbing peak seems to defy intuitive physics materializes out of the haze. Shapes move in the darkness and a familiar icy fear reaches up quickly to embrace you. But…</p>
<p>…they are like you.</p>
<p>They pause cautiously and then notice your rags, shaking hands clutching shattered stone shards. One shouts excitedly to the others, rapidly joining together a series of confusing and challenging syllables, pointing to the lion’s mane wrapped around <em>She-Who-Slayed-Him</em>. The same one steps out towards the others slowly and lowers a much more impressively crafted bone knife to the ground and then raises his hands towards you. You look to the others, who imperceptibly nod, and you slowly bend to set your stone shards on the ground and begin awkwardly walking over together. As you step closer you see there are only six people in total and, as your eyes take in each unique face, the look of hope at your arrival is palpable. You are needed here.</p>
<p>You are welcome here.<br><br></p>
<center>
You are home
</center>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Copyright</h2><div id="quarto-copyright" class="quarto-appendix-contents"><div>John Vivian - 2023 - All Rights Reserved</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>